<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Utilities for manipulating the primary selection"><title>smithay::wayland::primary_selection - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-f3501f0f5ae15dfb.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="smithay" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.0-nightly (1a5f8bce7 2023-05-26)" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../../../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../smithay/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../smithay/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module primary_selection</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">smithay</a>::<wbr><a href="../index.html">wayland</a>::<wbr><a class="mod" href="#">primary_selection</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/smithay/wayland/primary_selection/mod.rs.html#1-382">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Utilities for manipulating the primary selection</p>
<p>The primary selection is an additional protocol modeled after the data device to represent
and additional selection (copy/paste), a concept taken from the X11 Server.
This primary selection is a shortcut to the common clipboard selection,
where text just needs to be selected in order to allow copying it elsewhere
The de facto way to perform this action is the middle mouse button, although it is not limited to this one.</p>
<p>This module provides the freestanding <a href="fn.set_primary_focus.html" title="fn smithay::wayland::primary_selection::set_primary_focus"><code>set_primary_focus</code></a> function:
This function sets the data device focus for a given seat; you’d typically call it
whenever the keyboard focus changes, to follow it (for example in the focus hook of your keyboards).</p>
<p>The module also provides an additional mechanism allowing your compositor to see and interact with
the contents of the primary selection:</p>
<ul>
<li>the freestanding function <a href="fn.set_primary_selection.html" title="fn smithay::wayland::primary_selection::set_primary_selection"><code>set_primary_selection</code></a>
allows you to set the contents of the selection for your clients</li>
<li>the <code>PrimarySelectionHandle</code> gives you the option to inspect new selections
by overriding <a href="trait.PrimarySelectionHandler.html#method.new_selection" title="method smithay::wayland::primary_selection::PrimarySelectionHandler::new_selection">`PrimarySelectionHandler::new_selection</a>.</li>
</ul>
<h3 id="initialization"><a href="#initialization">Initialization</a></h3>
<p>To initialize this implementation, create the <a href="struct.PrimarySelectionState.html" title="struct smithay::wayland::primary_selection::PrimarySelectionState"><code>PrimarySelectionState</code></a>, store it inside your <code>State</code> struct
and implement the <a href="trait.PrimarySelectionHandler.html" title="trait smithay::wayland::primary_selection::PrimarySelectionHandler"><code>PrimarySelectionHandler</code></a>, as shown in this example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>smithay::delegate_primary_selection;
<span class="kw">use </span>smithay::wayland::primary_selection::{PrimarySelectionState, PrimarySelectionHandler};

<span class="comment">// Create the primary_selection state
</span><span class="kw">let </span>primary_selection_state = PrimarySelectionState::new::&lt;State&gt;(
    <span class="kw-2">&amp;</span>display.handle(),
);

<span class="comment">// insert the PrimarySelectionState into your state
// ..

// implement the necessary traits
</span><span class="kw">impl </span>PrimarySelectionHandler <span class="kw">for </span>State {
    <span class="kw">type </span>SelectionUserData = ();
    <span class="kw">fn </span>primary_selection_state(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; <span class="kw-2">&amp;</span>PrimarySelectionState { <span class="kw-2">&amp;</span><span class="self">self</span>.primary_selection_state }
    <span class="comment">// ... override default implementations here to customize handling ...
</span>}
<span class="macro">delegate_primary_selection!</span>(State);

<span class="comment">// You&#39;re now ready to go!</span></code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.PrimarySelectionState.html" title="struct smithay::wayland::primary_selection::PrimarySelectionState">PrimarySelectionState</a></div><div class="desc docblock-short">State of data device</div></li><li><div class="item-name"><a class="struct" href="struct.SourceMetadata.html" title="struct smithay::wayland::primary_selection::SourceMetadata">SourceMetadata</a></div><div class="desc docblock-short">The metadata describing a data source</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.SelectionRequestError.html" title="enum smithay::wayland::primary_selection::SelectionRequestError">SelectionRequestError</a></div><div class="desc docblock-short">Errors happening when requesting selection contents</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.PrimarySelectionHandler.html" title="trait smithay::wayland::primary_selection::PrimarySelectionHandler">PrimarySelectionHandler</a></div><div class="desc docblock-short">Events that are generated by interactions of the clients with the data device</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.clear_primary_selection.html" title="fn smithay::wayland::primary_selection::clear_primary_selection">clear_primary_selection</a></div><div class="desc docblock-short">Clear the current selection for this seat</div></li><li><div class="item-name"><a class="fn" href="fn.current_primary_selection_userdata.html" title="fn smithay::wayland::primary_selection::current_primary_selection_userdata">current_primary_selection_userdata</a></div><div class="desc docblock-short">Gets the user_data for the currently active selection, if set by the compositor</div></li><li><div class="item-name"><a class="fn" href="fn.request_primary_client_selection.html" title="fn smithay::wayland::primary_selection::request_primary_client_selection">request_primary_client_selection</a></div><div class="desc docblock-short">Request the current primary selection of the given seat
to be written to the provided file descriptor in the given mime type.</div></li><li><div class="item-name"><a class="fn" href="fn.set_primary_focus.html" title="fn smithay::wayland::primary_selection::set_primary_focus">set_primary_focus</a></div><div class="desc docblock-short">Set the primary selection focus to a certain client for a given seat</div></li><li><div class="item-name"><a class="fn" href="fn.set_primary_selection.html" title="fn smithay::wayland::primary_selection::set_primary_selection">set_primary_selection</a></div><div class="desc docblock-short">Set a compositor-provided primary selection for this seat</div></li><li><div class="item-name"><a class="fn" href="fn.with_source_metadata.html" title="fn smithay::wayland::primary_selection::with_source_metadata">with_source_metadata</a></div><div class="desc docblock-short">Access the metadata of a data source</div></li></ul></section></div></main></body></html>