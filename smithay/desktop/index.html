<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Desktop management helpers"><title>smithay::desktop - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-f3501f0f5ae15dfb.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="smithay" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.0-nightly (1a5f8bce7 2023-05-26)" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../smithay/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../smithay/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module desktop</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">smithay</a>::<wbr><a class="mod" href="#">desktop</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/smithay/desktop/mod.rs.html#1-68">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Desktop management helpers</p>
<p>This module contains helpers to organize and interact with desktop-style shells.</p>
<p>It is therefore a lot more opinionated than for example the <a href="../wayland/shell/xdg/trait.XdgShellHandler.html" title="trait smithay::wayland::shell::xdg::XdgShellHandler">xdg-shell handler</a>
and tightly integrates with some protocols (e.g. xdg-shell).</p>
<p>The usage of this module is therefor entirely optional and depending on your use-case you might also only want
to use a limited set of the helpers provided.</p>
<h3 id="helpers"><a href="#helpers">Helpers</a></h3><h4 id="window"><a href="#window"><code>Window</code></a></h4>
<p>A window represents what is typically understood by the end-user as a single application window.</p>
<p>Currently it abstracts over xdg-shell toplevels and Xwayland surfaces (TODO).
It provides a bunch of methods to calculate and retrieve its size, manage itself, attach additional user_data
as well as a <a href="%60draw_window%60">drawing function</a> to ease rendering it’s related surfaces.</p>
<p>Note that a <a href="struct.Window.html" title="struct smithay::desktop::Window"><code>Window</code></a> on it’s own has no position. For that it needs to be placed inside a <a href="space/struct.Space.html" title="struct smithay::desktop::space::Space"><code>Space</code></a>.</p>
<h4 id="space"><a href="#space"><code>Space</code></a></h4>
<p>A space represents a two-dimensional plane of undefined dimensions.
<a href="struct.Window.html" title="struct smithay::desktop::Window"><code>Window</code></a>s (and other types implementing <a href="space/trait.SpaceElement.html" title="trait smithay::desktop::space::SpaceElement"><code>SpaceElement</code></a>) and <a href="../output/struct.Output.html" title="struct smithay::output::Output"><code>Output</code></a>s can be mapped onto it.</p>
<p>Elements get a position and stacking order through mapping. Outputs become views of a part of the <a href="space/struct.Space.html" title="struct smithay::desktop::space::Space"><code>Space</code></a>
and can be rendered via <a href="space/fn.render_output.html" title="fn smithay::desktop::space::render_output"><code>render_output</code></a>.</p>
<h4 id="layer-shell"><a href="#layer-shell">Layer Shell</a></h4>
<p>A <a href="struct.LayerSurface.html" title="struct smithay::desktop::LayerSurface"><code>LayerSurface</code></a> represents a surface as provided by e.g. the layer-shell protocol.
It provides similar helper methods as a <a href="struct.Window.html" title="struct smithay::desktop::Window"><code>Window</code></a> does to toplevel surfaces.</p>
<p>Each <a href="../output/struct.Output.html" title="struct smithay::output::Output"><code>Output</code></a> can be associated a <a href="struct.LayerMap.html" title="struct smithay::desktop::LayerMap"><code>LayerMap</code></a> by calling <a href="fn.layer_map_for_output.html" title="fn smithay::desktop::layer_map_for_output"><code>layer_map_for_output</code></a>,
which <a href="struct.LayerSurface.html" title="struct smithay::desktop::LayerSurface"><code>LayerSurface</code></a>s can be mapped upon. Associated layer maps are automatically rendered by <a href="space/fn.render_output.html" title="fn smithay::desktop::space::render_output"><code>render_output</code></a>,
but a <a href="%60draw_layer_surface%60">draw function</a> is also provided for manual layer-surface management.</p>
<h4 id="popups"><a href="#popups">Popups</a></h4>
<p>Provides a <a href="struct.PopupManager.html" title="struct smithay::desktop::PopupManager"><code>PopupManager</code></a>, which can be used to automatically keep track of popups and their
relations to one-another. Popups are then automatically rendered with their matching toplevel surfaces,
when either [<code>draw_window</code>], [<code>draw_layer_surface</code>] or <a href="space/fn.render_output.html" title="fn smithay::desktop::space::render_output"><code>render_output</code></a> is called.</p>
<h3 id="remarks"><a href="#remarks">Remarks</a></h3>
<p>Note that the desktop abstractions are concerned with easing rendering different clients and therefore need to be able
to manage client buffers to do so. If you plan to use the provided drawing functions, you need to use
<a href="../backend/renderer/utils/fn.on_commit_buffer_handler.html" title="fn smithay::backend::renderer::utils::on_commit_buffer_handler"><code>on_commit_buffer_handler</code></a>.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.Space"><code>pub use self::space::<a class="struct" href="space/struct.Space.html" title="struct smithay::desktop::space::Space">Space</a>;</code></div></li></ul><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="space/index.html" title="mod smithay::desktop::space">space</a></div><div class="desc docblock-short">This module contains the <a href="space/struct.Space.html" title="struct smithay::desktop::space::Space"><code>Space</code></a> helper class as well has related
rendering helpers to add custom elements or different clients to a space.</div></li><li><div class="item-name"><a class="mod" href="utils/index.html" title="mod smithay::desktop::utils">utils</a></div><div class="desc docblock-short">Helper functions to ease dealing with surface trees</div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.LayerMap.html" title="struct smithay::desktop::LayerMap">LayerMap</a></div><div class="desc docblock-short">Map of <a href="struct.LayerSurface.html" title="struct smithay::desktop::LayerSurface"><code>LayerSurface</code></a>s on an <a href="../output/struct.Output.html" title="struct smithay::output::Output"><code>Output</code></a></div></li><li><div class="item-name"><a class="struct" href="struct.LayerSurface.html" title="struct smithay::desktop::LayerSurface">LayerSurface</a></div><div class="desc docblock-short">A <a href="struct.LayerSurface.html" title="struct smithay::desktop::LayerSurface"><code>LayerSurface</code></a> represents a single layer surface as given by the wlr-layer-shell protocol.</div></li><li><div class="item-name"><a class="struct" href="struct.PopupGrab.html" title="struct smithay::desktop::PopupGrab">PopupGrab</a></div><div class="desc docblock-short">Represents the explicit grab a client requested for a popup</div></li><li><div class="item-name"><a class="struct" href="struct.PopupKeyboardGrab.html" title="struct smithay::desktop::PopupKeyboardGrab">PopupKeyboardGrab</a></div><div class="desc docblock-short">Default implementation of a <a href="../input/keyboard/trait.KeyboardGrab.html" title="trait smithay::input::keyboard::KeyboardGrab"><code>KeyboardGrab</code></a> for <a href="struct.PopupGrab.html" title="struct smithay::desktop::PopupGrab"><code>PopupGrab</code></a></div></li><li><div class="item-name"><a class="struct" href="struct.PopupManager.html" title="struct smithay::desktop::PopupManager">PopupManager</a></div><div class="desc docblock-short">Helper to track popups.</div></li><li><div class="item-name"><a class="struct" href="struct.PopupPointerGrab.html" title="struct smithay::desktop::PopupPointerGrab">PopupPointerGrab</a></div><div class="desc docblock-short">Default implementation of a <a href="../input/pointer/trait.PointerGrab.html" title="trait smithay::input::pointer::PointerGrab"><code>PointerGrab</code></a> for <a href="struct.PopupGrab.html" title="struct smithay::desktop::PopupGrab"><code>PopupGrab</code></a></div></li><li><div class="item-name"><a class="struct" href="struct.Window.html" title="struct smithay::desktop::Window">Window</a></div><div class="desc docblock-short">Represents a single application window</div></li><li><div class="item-name"><a class="struct" href="struct.WindowSurfaceType.html" title="struct smithay::desktop::WindowSurfaceType">WindowSurfaceType</a></div><div class="desc docblock-short">Defines the surface types that can be
queried with <a href="struct.Window.html#method.surface_under" title="method smithay::desktop::Window::surface_under"><code>Window::surface_under</code></a></div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.PopupGrabError.html" title="enum smithay::desktop::PopupGrabError">PopupGrabError</a></div><div class="desc docblock-short">Defines the possible errors that
can be returned from <a href="struct.PopupManager.html#method.grab_popup" title="method smithay::desktop::PopupManager::grab_popup"><code>PopupManager::grab_popup</code></a></div></li><li><div class="item-name"><a class="enum" href="enum.PopupKind.html" title="enum smithay::desktop::PopupKind">PopupKind</a></div><div class="desc docblock-short">Represents a popup surface</div></li><li><div class="item-name"><a class="enum" href="enum.PopupUngrabStrategy.html" title="enum smithay::desktop::PopupUngrabStrategy">PopupUngrabStrategy</a></div><div class="desc docblock-short">Defines the possibly strategies
for the <a href="struct.PopupGrab.html#method.ungrab" title="method smithay::desktop::PopupGrab::ungrab"><code>PopupGrab::ungrab</code></a> operation</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.find_popup_root_surface.html" title="fn smithay::desktop::find_popup_root_surface">find_popup_root_surface</a></div><div class="desc docblock-short">Finds the toplevel wl_surface this popup belongs to.</div></li><li><div class="item-name"><a class="fn" href="fn.layer_map_for_output.html" title="fn smithay::desktop::layer_map_for_output">layer_map_for_output</a></div><div class="desc docblock-short">Retrieve a <a href="struct.LayerMap.html" title="struct smithay::desktop::LayerMap"><code>LayerMap</code></a> for a given <a href="../output/struct.Output.html" title="struct smithay::output::Output"><code>Output</code></a>.</div></li></ul></section></div></main></body></html>