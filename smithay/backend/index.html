<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Backend (rendering/input) helpers"><title>smithay::backend - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-f3501f0f5ae15dfb.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="smithay" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.0-nightly (1a5f8bce7 2023-05-26)" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../smithay/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../smithay/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module backend</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#enums">Enums</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">smithay</a>::<wbr><a class="mod" href="#">backend</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/smithay/backend/mod.rs.html#1-136">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Backend (rendering/input) helpers</p>
<p>This module provides helpers for interaction with the operating system.</p>
<h3 id="module-structure"><a href="#module-structure">Module structure</a></h3>
<p>The module is largely structured around three main aspects of interaction with the OS:
session management, input handling, and graphics.</p>
<h4 id="session-management"><a href="#session-management">Session management</a></h4>
<p>Session management relates to mechanisms allowing the compositor to access the resources
it needs to function. It contains interaction with the login manager if any ((e)logind or
seatd), as well as releasing those resources when TTY-switching. It is handled by the
<a href="session/index.html" title="mod smithay::backend::session"><code>session</code></a> module, gated by the <code>backend_session</code> cargo feature. You will generally need
it to run your compositor directly on a TTY.</p>
<p>This module is tightly coupled with the <a href="udev/index.html" title="mod smithay::backend::udev"><code>udev</code></a> module (gated by the <code>backend_udev</code> cargo
feature), which allows the discovery of usable graphics and input devices on the system, using
the udev system daemon.</p>
<h4 id="input-handling"><a href="#input-handling">Input handling</a></h4>
<p>Input handling consists in discovering the various available input devices, and receiving
all inputs events from it. Smithay is build to support different possible sources for
that input data, with a generic API provided by the traits and types defined in the
<a href="input/index.html" title="mod smithay::backend::input"><code>input</code></a> module. An input provider following this API based on <code>libinput</code> is given in the
<a href="libinput/index.html" title="mod smithay::backend::libinput"><code>libinput</code></a> module, gated by the <code>backend_libinput</code> cargo feature. The winit backend
(see below) also provides an input provider.</p>
<h4 id="graphics"><a href="#graphics">Graphics</a></h4>
<p>Combining content from the clients and displaying it on the screen is the central role of
a wayland compositor, and also one of its most complex tasks; several backend modules are
dedicated to this task.</p>
<p>Smithay provides a rendering infrastructure built around graphics buffers: you retrieve buffers
for your client, you composite them into a new buffer holding the contents of your desktop,
that you will then submit to the hardware for display. The backbone of this infrastructure is
structured around two modules:</p>
<ul>
<li><a href="allocator/index.html" title="mod smithay::backend::allocator"><code>allocator</code></a> contains generic traits representing the capability to
allocate and convert graphical buffers, as well as an implementation of this
capability using GBM (see its module-level docs for details).</li>
<li><a href="renderer/index.html" title="mod smithay::backend::renderer"><code>renderer</code></a> provides traits representing the capability of graphics
rendering using those buffers, as well as an implementation of this
capability using GLes2 (see its module-level docs for details).</li>
</ul>
<p>Alongside this backbone capability, Smithay also provides the <a href="drm/index.html" title="mod smithay::backend::drm"><code>drm</code></a> module, which handles
direct interaction with the graphical physical devices to setup the display pipeline and
submit rendered buffers to the monitors for display. This module is gated by the
<code>backend_drm</code> cargo feature.</p>
<p>The <a href="egl/index.html" title="mod smithay::backend::egl"><code>egl</code></a> module provides the logic to setup an OpenGL context. It is used by the Gles2
renderer (which is based on OpenGL), and also provides the capability for clients to use
the <code>wl_drm</code>-based hardware-acceleration provided by Mesa, a precursor to the
<a href="../wayland/dmabuf/index.html" title="mod smithay::wayland::dmabuf"><code>linux_dmabuf</code></a> Wayland protocol extension. Note that, at the
moment, even clients using dma-buf still require that the <code>wl_drm</code> infrastructure is
initialized to have hardware-acceleration.</p>
<h3 id="x11-backend"><a href="#x11-backend">X11 backend</a></h3>
<p>Alongside this infrastructure, Smithay also provides an alternative backend based on
<a href="https://crates.io/crates/x11rb">x11rb</a>, which makes it possible to run your compositor as
an X11 client. This is generally quite helpful for development and debugging.</p>
<p>The X11 backend does not concern itself with what renderer is in use, allowing presentation to
the window assuming you can provide it with a <a href="allocator/dmabuf/struct.Dmabuf.html" title="struct smithay::backend::allocator::dmabuf::Dmabuf"><code>Dmabuf</code></a>.
The X11 backend is also an input provider, and is accessible in the <a href="x11/index.html" title="mod smithay::backend::x11"><code>x11</code></a> module, gated by
the <code>backend_x11</code> cargo feature.</p>
<h3 id="winit-backend"><a href="#winit-backend">Winit backend</a></h3>
<p>Alongside this infrastructure, Smithay also provides an alternative backend based on
<a href="https://crates.io/crates/winit">winit</a>, which makes it possible to run your compositor as
a Wayland or X11 client. You are encouraged to use the X11 backend where possible since winit
does not integrate into calloop too well. This backend is generally quite helpful for
development and debugging. That backend is both a renderer and an input provider, and is
accessible in the <a href="winit/index.html" title="mod smithay::backend::winit"><code>winit</code></a> module, gated by the <code>backend_winit</code> cargo feature.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="allocator/index.html" title="mod smithay::backend::allocator">allocator</a></div><div class="desc docblock-short">Buffer allocation and management.</div></li><li><div class="item-name"><a class="mod" href="drm/index.html" title="mod smithay::backend::drm">drm</a></div><div class="desc docblock-short">This module represents abstraction on top the linux direct rendering manager api (drm).</div></li><li><div class="item-name"><a class="mod" href="egl/index.html" title="mod smithay::backend::egl">egl</a></div><div class="desc docblock-short">Common traits and types for egl rendering</div></li><li><div class="item-name"><a class="mod" href="input/index.html" title="mod smithay::backend::input">input</a></div><div class="desc docblock-short">Common traits for input backends to receive input from.</div></li><li><div class="item-name"><a class="mod" href="libinput/index.html" title="mod smithay::backend::libinput">libinput</a></div><div class="desc docblock-short">Implementation of input backend trait for types provided by <code>libinput</code></div></li><li><div class="item-name"><a class="mod" href="renderer/index.html" title="mod smithay::backend::renderer">renderer</a></div><div class="desc docblock-short">Rendering functionality and abstractions</div></li><li><div class="item-name"><a class="mod" href="session/index.html" title="mod smithay::backend::session">session</a></div><div class="desc docblock-short">Abstraction of different session APIs.</div></li><li><div class="item-name"><a class="mod" href="udev/index.html" title="mod smithay::backend::udev">udev</a></div><div class="desc docblock-short"><code>udev</code> related functionality for automated device scanning</div></li><li><div class="item-name"><a class="mod" href="vulkan/index.html" title="mod smithay::backend::vulkan">vulkan</a></div><div class="desc docblock-short">Types to initialize and use Vulkan.</div></li><li><div class="item-name"><a class="mod" href="winit/index.html" title="mod smithay::backend::winit">winit</a></div><div class="desc docblock-short">Implementation of backend traits for types provided by <code>winit</code></div></li><li><div class="item-name"><a class="mod" href="x11/index.html" title="mod smithay::backend::x11">x11</a></div><div class="desc docblock-short">Implementation of the backend types using X11.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.SwapBuffersError.html" title="enum smithay::backend::SwapBuffersError">SwapBuffersError</a></div><div class="desc docblock-short">Error that can happen when swapping buffers.</div></li></ul></section></div></main></body></html>